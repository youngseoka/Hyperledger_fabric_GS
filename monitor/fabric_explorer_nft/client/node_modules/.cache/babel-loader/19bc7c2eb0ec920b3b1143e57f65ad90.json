{"ast":null,"code":"import _classCallCheck from\"/fabric_explorer_nft/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/fabric_explorer_nft/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/fabric_explorer_nft/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/fabric_explorer_nft/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n *    SPDX-License-Identifier: Apache-2.0\n */import React,{Component}from'react';import{withStyles}from'@material-ui/core/styles';import{Row,Col}from'reactstrap';import FontAwesome from'react-fontawesome';import Card from'@material-ui/core/Card';import Avatar from'@material-ui/core/Avatar';import ChartStats from'../Charts/ChartStats';import PeersHealth from'../Lists/PeersHealth';import TimelineStream from'../Lists/TimelineStream';import OrgPieChart from'../Charts/OrgPieChart';import{blockListType,dashStatsType,peerStatusType,transactionByOrgType}from'../types';/* istanbul ignore next */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var styles=function styles(theme){var type=theme.palette.type;var dark=type==='dark';return{background:{backgroundColor:dark?'rgb(36, 32, 54)':'#f0f5f9'},view:{paddingTop:85,paddingLeft:0,width:'80%',marginLeft:'10%',marginRight:'10%'},blocks:{height:175,marginBottom:20,backgroundColor:dark?'#453e68':'#ffffff',boxShadow:dark?'1px 2px 2px rgb(215, 247, 247)':undefined},count:{marginTop:'55%',color:dark?'#ffffff':undefined},statistic:{display:'block',float:'left',height:'100%',width:'25%',textAlign:'center',fontSize:'18pt',color:dark?'#ffffff':'#000000'},vdivide:{'&::after':{borderRight:\"2px \".concat(dark?'rgb(40, 36, 61)':'#dff1fe',\" solid\"),display:'block',height:'45%',bottom:'55%',content:\"' '\",position:'relative'}},avatar:{justifyContent:'center',marginLeft:'60%',marginTop:'65%'},node:{color:dark?'#183a37':'#21295c',backgroundColor:dark?'rgb(104, 247, 235)':'#858aa6'},block:{color:dark?'#1f1a33':'#004d6b',backgroundColor:dark?'rgb(106, 156, 248)':'#b9d6e1'},chaincode:{color:dark?'rgb(121, 83, 109)':'#407b20',backgroundColor:dark?'rgb(247, 205, 234)':'#d0ecda'},transaction:{color:dark?'rgb(216, 142, 4)':'#ffa686',backgroundColor:dark?'rgb(252, 224, 174)':'#ffeed8'},section:{height:335,marginBottom:'2%',color:dark?'#ffffff':undefined,backgroundColor:dark?'#3c3558':undefined},center:{textAlign:'center'}};};export var DashboardView=/*#__PURE__*/function(_Component){_inherits(DashboardView,_Component);var _super=_createSuper(DashboardView);function DashboardView(props){var _this;_classCallCheck(this,DashboardView);_this=_super.call(this,props);_this.setNotifications=function(blockList){var notificationsArr=[];if(blockList!==undefined){for(var i=0;i<3&&blockList&&blockList[i];i+=1){var block=blockList[i];var notify={title:\"Block \".concat(block.blocknum,\" \"),type:'block',time:block.createdt,txcount:block.txcount,datahash:block.datahash,blockhash:block.blockhash,channelName:block.channelname};notificationsArr.push(notify);}}_this.setState({notifications:notificationsArr});};_this.state={notifications:[],hasDbError:false};return _this;}_createClass(DashboardView,[{key:\"componentWillMount\",value:function componentWillMount(){var _this$props=this.props,blockList=_this$props.blockList,dashStats=_this$props.dashStats,peerStatus=_this$props.peerStatus,transactionByOrg=_this$props.transactionByOrg,blockActivity=_this$props.blockActivity;if(blockList===undefined||dashStats===undefined||peerStatus===undefined||blockActivity===undefined||transactionByOrg===undefined){this.setState({hasDbError:true});}}},{key:\"componentDidMount\",value:function componentDidMount(){var blockActivity=this.props.blockActivity;this.setNotifications(blockActivity);}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(){var blockActivity=this.props.blockActivity;this.setNotifications(blockActivity);}},{key:\"render\",value:function render(){var _this$props2=this.props,dashStats=_this$props2.dashStats,peerStatus=_this$props2.peerStatus,blockActivity=_this$props2.blockActivity,transactionByOrg=_this$props2.transactionByOrg;var _this$state=this.state,hasDbError=_this$state.hasDbError,notifications=_this$state.notifications;if(hasDbError){return/*#__PURE__*/_jsx(\"div\",{style:{height:'100vh',display:'flex',justifyContent:'center',alignItems:'center'},children:/*#__PURE__*/_jsx(\"h1\",{children:\"Please verify your network configuration, database configuration and try again\"})});}var classes=this.props.classes;return/*#__PURE__*/_jsx(\"div\",{className:classes.background,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.view,children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{sm:\"12\",children:/*#__PURE__*/_jsxs(Card,{className:classes.blocks,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(classes.statistic,\" \").concat(classes.vdivide),children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{sm:\"4\",children:/*#__PURE__*/_jsx(Avatar,{className:\"\".concat(classes.avatar,\" \").concat(classes.block),children:/*#__PURE__*/_jsx(FontAwesome,{name:\"cube\"})})}),/*#__PURE__*/_jsx(Col,{sm:\"4\",children:/*#__PURE__*/_jsx(\"h1\",{className:classes.count,children:dashStats.latestBlock})})]}),\"BLOCKS\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(classes.statistic,\" \").concat(classes.vdivide),children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{sm:\"4\",children:/*#__PURE__*/_jsx(Avatar,{className:\"\".concat(classes.avatar,\" \").concat(classes.transaction),children:/*#__PURE__*/_jsx(FontAwesome,{name:\"list-alt\"})})}),/*#__PURE__*/_jsx(Col,{sm:\"4\",children:/*#__PURE__*/_jsx(\"h1\",{className:classes.count,children:dashStats.txCount})})]}),\"TRANSACTIONS\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(classes.statistic,\" \").concat(classes.vdivide),children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{sm:\"4\",children:/*#__PURE__*/_jsx(Avatar,{className:\"\".concat(classes.avatar,\" \").concat(classes.node),children:/*#__PURE__*/_jsx(FontAwesome,{name:\"users\"})})}),/*#__PURE__*/_jsx(Col,{sm:\"4\",children:/*#__PURE__*/_jsx(\"h1\",{className:classes.count,children:dashStats.peerCount})})]}),\"NODES\"]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.statistic,children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{sm:\"4\",children:/*#__PURE__*/_jsx(Avatar,{className:\"\".concat(classes.avatar,\" \").concat(classes.chaincode),children:/*#__PURE__*/_jsx(FontAwesome,{name:\"handshake-o\"})})}),/*#__PURE__*/_jsx(Col,{sm:\"4\",children:/*#__PURE__*/_jsx(\"h1\",{className:classes.count,children:dashStats.chaincodeCount})})]}),\"CHAINCODES\"]})]})})}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{sm:\"6\",children:[/*#__PURE__*/_jsx(Card,{className:classes.section,children:/*#__PURE__*/_jsx(PeersHealth,{peerStatus:peerStatus})}),/*#__PURE__*/_jsx(Card,{className:classes.section,children:/*#__PURE__*/_jsx(TimelineStream,{notifications:notifications,blockList:blockActivity})})]}),/*#__PURE__*/_jsxs(Col,{sm:\"6\",children:[/*#__PURE__*/_jsx(Card,{className:classes.section,children:/*#__PURE__*/_jsx(ChartStats,{})}),/*#__PURE__*/_jsxs(Card,{className:\"\".concat(classes.section,\" \").concat(classes.center),children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Transactions by Organization\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(OrgPieChart,{transactionByOrg:transactionByOrg})]})]})]})]})});}}]);return DashboardView;}(Component);export default withStyles(styles)(DashboardView);","map":{"version":3,"sources":["/fabric_explorer_nft/client/src/components/View/DashboardView.js"],"names":["React","Component","withStyles","Row","Col","FontAwesome","Card","Avatar","ChartStats","PeersHealth","TimelineStream","OrgPieChart","blockListType","dashStatsType","peerStatusType","transactionByOrgType","styles","theme","type","palette","dark","background","backgroundColor","view","paddingTop","paddingLeft","width","marginLeft","marginRight","blocks","height","marginBottom","boxShadow","undefined","count","marginTop","color","statistic","display","float","textAlign","fontSize","vdivide","borderRight","bottom","content","position","avatar","justifyContent","node","block","chaincode","transaction","section","center","DashboardView","props","setNotifications","blockList","notificationsArr","i","notify","title","blocknum","time","createdt","txcount","datahash","blockhash","channelName","channelname","push","setState","notifications","state","hasDbError","dashStats","peerStatus","transactionByOrg","blockActivity","alignItems","classes","latestBlock","txCount","peerCount","chaincodeCount"],"mappings":"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","sourcesContent":["/**\n *    SPDX-License-Identifier: Apache-2.0\n */\n\nimport React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport { Row, Col } from 'reactstrap';\nimport FontAwesome from 'react-fontawesome';\nimport Card from '@material-ui/core/Card';\nimport Avatar from '@material-ui/core/Avatar';\nimport ChartStats from '../Charts/ChartStats';\nimport PeersHealth from '../Lists/PeersHealth';\nimport TimelineStream from '../Lists/TimelineStream';\nimport OrgPieChart from '../Charts/OrgPieChart';\nimport {\n\tblockListType,\n\tdashStatsType,\n\tpeerStatusType,\n\ttransactionByOrgType\n} from '../types';\n\n/* istanbul ignore next */\nconst styles = theme => {\n\tconst { type } = theme.palette;\n\tconst dark = type === 'dark';\n\treturn {\n\t\tbackground: {\n\t\t\tbackgroundColor: dark ? 'rgb(36, 32, 54)' : '#f0f5f9'\n\t\t},\n\t\tview: {\n\t\t\tpaddingTop: 85,\n\t\t\tpaddingLeft: 0,\n\t\t\twidth: '80%',\n\t\t\tmarginLeft: '10%',\n\t\t\tmarginRight: '10%'\n\t\t},\n\t\tblocks: {\n\t\t\theight: 175,\n\t\t\tmarginBottom: 20,\n\t\t\tbackgroundColor: dark ? '#453e68' : '#ffffff',\n\t\t\tboxShadow: dark ? '1px 2px 2px rgb(215, 247, 247)' : undefined\n\t\t},\n\t\tcount: {\n\t\t\tmarginTop: '55%',\n\t\t\tcolor: dark ? '#ffffff' : undefined\n\t\t},\n\t\tstatistic: {\n\t\t\tdisplay: 'block',\n\t\t\tfloat: 'left',\n\t\t\theight: '100%',\n\t\t\twidth: '25%',\n\t\t\ttextAlign: 'center',\n\t\t\tfontSize: '18pt',\n\t\t\tcolor: dark ? '#ffffff' : '#000000'\n\t\t},\n\t\tvdivide: {\n\t\t\t'&::after': {\n\t\t\t\tborderRight: `2px ${dark ? 'rgb(40, 36, 61)' : '#dff1fe'} solid`,\n\t\t\t\tdisplay: 'block',\n\t\t\t\theight: '45%',\n\t\t\t\tbottom: '55%',\n\t\t\t\tcontent: \"' '\",\n\t\t\t\tposition: 'relative'\n\t\t\t}\n\t\t},\n\t\tavatar: {\n\t\t\tjustifyContent: 'center',\n\t\t\tmarginLeft: '60%',\n\t\t\tmarginTop: '65%'\n\t\t},\n\t\tnode: {\n\t\t\tcolor: dark ? '#183a37' : '#21295c',\n\t\t\tbackgroundColor: dark ? 'rgb(104, 247, 235)' : '#858aa6'\n\t\t},\n\t\tblock: {\n\t\t\tcolor: dark ? '#1f1a33' : '#004d6b',\n\t\t\tbackgroundColor: dark ? 'rgb(106, 156, 248)' : '#b9d6e1'\n\t\t},\n\t\tchaincode: {\n\t\t\tcolor: dark ? 'rgb(121, 83, 109)' : '#407b20',\n\t\t\tbackgroundColor: dark ? 'rgb(247, 205, 234)' : '#d0ecda'\n\t\t},\n\t\ttransaction: {\n\t\t\tcolor: dark ? 'rgb(216, 142, 4)' : '#ffa686',\n\t\t\tbackgroundColor: dark ? 'rgb(252, 224, 174)' : '#ffeed8'\n\t\t},\n\t\tsection: {\n\t\t\theight: 335,\n\t\t\tmarginBottom: '2%',\n\t\t\tcolor: dark ? '#ffffff' : undefined,\n\t\t\tbackgroundColor: dark ? '#3c3558' : undefined\n\t\t},\n\t\tcenter: {\n\t\t\ttextAlign: 'center'\n\t\t}\n\t};\n};\n\nexport class DashboardView extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tnotifications: [],\n\t\t\thasDbError: false\n\t\t};\n\t}\n\n\tcomponentWillMount() {\n\t\tconst {\n\t\t\tblockList,\n\t\t\tdashStats,\n\t\t\tpeerStatus,\n\t\t\ttransactionByOrg,\n\t\t\tblockActivity\n\t\t} = this.props;\n\t\tif (\n\t\t\tblockList === undefined ||\n\t\t\tdashStats === undefined ||\n\t\t\tpeerStatus === undefined ||\n\t\t\tblockActivity === undefined ||\n\t\t\ttransactionByOrg === undefined\n\t\t) {\n\t\t\tthis.setState({ hasDbError: true });\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { blockActivity } = this.props;\n\t\tthis.setNotifications(blockActivity);\n\t}\n\n\tcomponentWillReceiveProps() {\n\t\tconst { blockActivity } = this.props;\n\t\tthis.setNotifications(blockActivity);\n\t}\n\n\tsetNotifications = blockList => {\n\t\tconst notificationsArr = [];\n\t\tif (blockList !== undefined) {\n\t\t\tfor (let i = 0; i < 3 && blockList && blockList[i]; i += 1) {\n\t\t\t\tconst block = blockList[i];\n\t\t\t\tconst notify = {\n\t\t\t\t\ttitle: `Block ${block.blocknum} `,\n\t\t\t\t\ttype: 'block',\n\t\t\t\t\ttime: block.createdt,\n\t\t\t\t\ttxcount: block.txcount,\n\t\t\t\t\tdatahash: block.datahash,\n\t\t\t\t\tblockhash: block.blockhash,\n\t\t\t\t\tchannelName: block.channelname\n\t\t\t\t};\n\t\t\t\tnotificationsArr.push(notify);\n\t\t\t}\n\t\t}\n\t\tthis.setState({ notifications: notificationsArr });\n\t};\n\n\trender() {\n\t\tconst { dashStats, peerStatus, blockActivity, transactionByOrg } = this.props;\n\t\tconst { hasDbError, notifications } = this.state;\n\t\tif (hasDbError) {\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\theight: '100vh',\n\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\talignItems: 'center'\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<h1>\n\t\t\t\t\t\tPlease verify your network configuration, database configuration and try\n\t\t\t\t\t\tagain\n\t\t\t\t\t</h1>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\tconst { classes } = this.props;\n\t\treturn (\n\t\t\t<div className={classes.background}>\n\t\t\t\t<div className={classes.view}>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col sm=\"12\">\n\t\t\t\t\t\t\t<Card className={classes.blocks}>\n\t\t\t\t\t\t\t\t<div className={`${classes.statistic} ${classes.vdivide}`}>\n\t\t\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t\t\t<Col sm=\"4\">\n\t\t\t\t\t\t\t\t\t\t\t<Avatar className={`${classes.avatar} ${classes.block}`}>\n\t\t\t\t\t\t\t\t\t\t\t\t<FontAwesome name=\"cube\" />\n\t\t\t\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t\t<Col sm=\"4\">\n\t\t\t\t\t\t\t\t\t\t\t<h1 className={classes.count}>{dashStats.latestBlock}</h1>\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t\tBLOCKS\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={`${classes.statistic} ${classes.vdivide}`}>\n\t\t\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t\t\t<Col sm=\"4\">\n\t\t\t\t\t\t\t\t\t\t\t<Avatar className={`${classes.avatar} ${classes.transaction}`}>\n\t\t\t\t\t\t\t\t\t\t\t\t<FontAwesome name=\"list-alt\" />\n\t\t\t\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t\t<Col sm=\"4\">\n\t\t\t\t\t\t\t\t\t\t\t<h1 className={classes.count}>{dashStats.txCount}</h1>\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t\tTRANSACTIONS\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={`${classes.statistic} ${classes.vdivide}`}>\n\t\t\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t\t\t<Col sm=\"4\">\n\t\t\t\t\t\t\t\t\t\t\t<Avatar className={`${classes.avatar} ${classes.node}`}>\n\t\t\t\t\t\t\t\t\t\t\t\t<FontAwesome name=\"users\" />\n\t\t\t\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t\t<Col sm=\"4\">\n\t\t\t\t\t\t\t\t\t\t\t<h1 className={classes.count}>{dashStats.peerCount}</h1>\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t\tNODES\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={classes.statistic}>\n\t\t\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t\t\t<Col sm=\"4\">\n\t\t\t\t\t\t\t\t\t\t\t<Avatar className={`${classes.avatar} ${classes.chaincode}`}>\n\t\t\t\t\t\t\t\t\t\t\t\t<FontAwesome name=\"handshake-o\" />\n\t\t\t\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t\t<Col sm=\"4\">\n\t\t\t\t\t\t\t\t\t\t\t<h1 className={classes.count}>{dashStats.chaincodeCount}</h1>\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t\tCHAINCODES\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col sm=\"6\">\n\t\t\t\t\t\t\t<Card className={classes.section}>\n\t\t\t\t\t\t\t\t<PeersHealth peerStatus={peerStatus} />\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t<Card className={classes.section}>\n\t\t\t\t\t\t\t\t<TimelineStream\n\t\t\t\t\t\t\t\t\tnotifications={notifications}\n\t\t\t\t\t\t\t\t\tblockList={blockActivity}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col sm=\"6\">\n\t\t\t\t\t\t\t<Card className={classes.section}>\n\t\t\t\t\t\t\t\t<ChartStats />\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t<Card className={`${classes.section} ${classes.center}`}>\n\t\t\t\t\t\t\t\t<h5>Transactions by Organization</h5>\n\t\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t\t<OrgPieChart transactionByOrg={transactionByOrg} />\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nDashboardView.propTypes = {\n\tblockList: blockListType.isRequired,\n\tdashStats: dashStatsType.isRequired,\n\tpeerStatus: peerStatusType.isRequired,\n\ttransactionByOrg: transactionByOrgType.isRequired\n};\n\nexport default withStyles(styles)(DashboardView);\n"]},"metadata":{},"sourceType":"module"}