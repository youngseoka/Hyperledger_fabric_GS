{"ast":null,"code":"import _objectSpread from\"/fabric_explorer_nft/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";/**\n *    SPDX-License-Identifier: Apache-2.0\n */import{post,get}from'../../../services/request';import{login as loginAction,network as networkAction,register as registerAction,unregister as unRegisterAction,userlist as userListAction,error as errorAction}from'./actions';import actions from'../charts/actions';import Auth from'../../Auth';var login=function login(_ref,networkObj){var user=_ref.user,password=_ref.password;return function(dispatch){return post('/auth/login',{user:user,password:password,network:networkObj}).then(function(resp){Auth.authenticateUser(resp.token);dispatch(errorAction(null));dispatch(loginAction(_objectSpread({user:user},resp)));return{status:'Success'};}).catch(function(error){// eslint-disable-next-line no-console\nconsole.error(error);dispatch(errorAction(JSON.stringify(error)));return{status:'Error',message:'Invalid User, Password'};});};};var network=function network(){return function(dispatch){return get('/auth/networklist',{}).then(function(_ref2){var networkList=_ref2.networkList;dispatch(networkAction({networks:networkList}));}).catch(function(error){// eslint-disable-next-line no-console\nconsole.error(error);dispatch(actions.getErroMessage(error));});};};var register=function register(user){return function(dispatch){return post('/api/register',_objectSpread({},user)).then(function(resp){if(resp.status===500){dispatch(actions.getErroMessage('500 Internal Server Error: The server has encountered an internal error and unable to complete your request'));}else if(resp.status===400){var message=resp.message;var msg=message.substr(6);return{status:'error',message:msg};}else{dispatch(registerAction(_objectSpread(_objectSpread({},user),resp)));return{status:'success',message:'registered successfully!'};}}).catch(function(error){console.error(error);dispatch(errorAction(error));});};};var userlist=function userlist(){return function(dispatch){return get('/api/userlist').then(function(resp){if(resp.status===500){dispatch(actions.getErroMessage('500 Internal Server Error: The server has encountered an internal error and unable to complete your request'));}else if(resp.status===400){var message=resp.message;var msg=message.substr(6);return{status:'error',message:msg};}else{dispatch(userListAction(_objectSpread({},resp)));return{status:'success',message:resp};}}).catch(function(error){console.error(error);dispatch(errorAction(error));});};};var unregister=function unregister(user){return function(dispatch){return post('/api/unregister',_objectSpread({},user)).then(function(resp){if(resp.status===500){dispatch(actions.getErroMessage('500 Internal Server Error: The server has encountered an internal error and unable to complete your request'));}else if(resp.status===400){var message=resp.message;var msg=message.substr(6);return{status:'error',message:msg};}else{dispatch(unRegisterAction(_objectSpread(_objectSpread({},user),resp)));return{status:'success',message:'Unregistered successfully!'};}}).catch(function(error){console.error(error);dispatch(errorAction(error));});};};var logout=function logout(){return function(dispatch){return post('/auth/logout',{}).then(function(resp){console.log(resp);Auth.deauthenticateUser();dispatch(errorAction(null));return{status:'Success'};}).catch(function(error){console.error(error);dispatch(actions.getErroMessage(error));return{status:'Error',message:'Invalid User token'};});};};export default{login:login,network:network,register:register,unregister:unregister,userlist:userlist,logout:logout};","map":{"version":3,"sources":["/fabric_explorer_nft/client/src/state/redux/auth/operations.js"],"names":["post","get","login","loginAction","network","networkAction","register","registerAction","unregister","unRegisterAction","userlist","userListAction","error","errorAction","actions","Auth","networkObj","user","password","dispatch","then","resp","authenticateUser","token","status","catch","console","JSON","stringify","message","networkList","networks","getErroMessage","msg","substr","logout","log","deauthenticateUser"],"mappings":"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","sourcesContent":["/**\n *    SPDX-License-Identifier: Apache-2.0\n */\n\nimport { post, get } from '../../../services/request';\n\nimport {\n\tlogin as loginAction,\n\tnetwork as networkAction,\n\tregister as registerAction,\n\tunregister as unRegisterAction,\n\tuserlist as userListAction,\n\terror as errorAction\n} from './actions';\n\nimport actions from '../charts/actions';\n\nimport Auth from '../../Auth';\n\nconst login = ({ user, password }, networkObj) => dispatch =>\n\tpost('/auth/login', { user, password, network: networkObj })\n\t\t.then(resp => {\n\t\t\tAuth.authenticateUser(resp.token);\n\t\t\tdispatch(errorAction(null));\n\t\t\tdispatch(loginAction({ user, ...resp }));\n\t\t\treturn { status: 'Success' };\n\t\t})\n\t\t.catch(error => {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.error(error);\n\t\t\tdispatch(errorAction(JSON.stringify(error)));\n\t\t\treturn { status: 'Error', message: 'Invalid User, Password' };\n\t\t});\n\nconst network = () => dispatch =>\n\tget('/auth/networklist', {})\n\t\t.then(({ networkList }) => {\n\t\t\tdispatch(networkAction({ networks: networkList }));\n\t\t})\n\t\t.catch(error => {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.error(error);\n\t\t\tdispatch(actions.getErroMessage(error));\n\t\t});\n\nconst register = user => dispatch =>\n\tpost('/api/register', { ...user })\n\t\t.then(resp => {\n\t\t\tif (resp.status === 500) {\n\t\t\t\tdispatch(\n\t\t\t\t\tactions.getErroMessage(\n\t\t\t\t\t\t'500 Internal Server Error: The server has encountered an internal error and unable to complete your request'\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t} else if (resp.status === 400) {\n\t\t\t\tconst message = resp.message;\n\t\t\t\tconst msg = message.substr(6);\n\t\t\t\treturn { status: 'error', message: msg };\n\t\t\t} else {\n\t\t\t\tdispatch(registerAction({ ...user, ...resp }));\n\t\t\t\treturn { status: 'success', message: 'registered successfully!' };\n\t\t\t}\n\t\t})\n\t\t.catch(error => {\n\t\t\tconsole.error(error);\n\t\t\tdispatch(errorAction(error));\n\t\t});\n\nconst userlist = () => dispatch =>\n\tget('/api/userlist')\n\t\t.then(resp => {\n\t\t\tif (resp.status === 500) {\n\t\t\t\tdispatch(\n\t\t\t\t\tactions.getErroMessage(\n\t\t\t\t\t\t'500 Internal Server Error: The server has encountered an internal error and unable to complete your request'\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t} else if (resp.status === 400) {\n\t\t\t\tconst message = resp.message;\n\t\t\t\tconst msg = message.substr(6);\n\t\t\t\treturn { status: 'error', message: msg };\n\t\t\t} else {\n\t\t\t\tdispatch(userListAction({ ...resp }));\n\t\t\t\treturn { status: 'success', message: resp };\n\t\t\t}\n\t\t})\n\t\t.catch(error => {\n\t\t\tconsole.error(error);\n\t\t\tdispatch(errorAction(error));\n\t\t});\n\nconst unregister = user => dispatch =>\n\tpost('/api/unregister', { ...user })\n\t\t.then(resp => {\n\t\t\tif (resp.status === 500) {\n\t\t\t\tdispatch(\n\t\t\t\t\tactions.getErroMessage(\n\t\t\t\t\t\t'500 Internal Server Error: The server has encountered an internal error and unable to complete your request'\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t} else if (resp.status === 400) {\n\t\t\t\tconst message = resp.message;\n\t\t\t\tconst msg = message.substr(6);\n\t\t\t\treturn { status: 'error', message: msg };\n\t\t\t} else {\n\t\t\t\tdispatch(unRegisterAction({ ...user, ...resp }));\n\t\t\t\treturn { status: 'success', message: 'Unregistered successfully!' };\n\t\t\t}\n\t\t})\n\t\t.catch(error => {\n\t\t\tconsole.error(error);\n\t\t\tdispatch(errorAction(error));\n\t\t});\n\nconst logout = () => dispatch =>\n\tpost('/auth/logout', {})\n\t\t.then(resp => {\n\t\t\tconsole.log(resp);\n\t\t\tAuth.deauthenticateUser();\n\t\t\tdispatch(errorAction(null));\n\t\t\treturn { status: 'Success' };\n\t\t})\n\t\t.catch(error => {\n\t\t\tconsole.error(error);\n\t\t\tdispatch(actions.getErroMessage(error));\n\t\t\treturn { status: 'Error', message: 'Invalid User token' };\n\t\t});\n\nexport default {\n\tlogin,\n\tnetwork,\n\tregister,\n\tunregister,\n\tuserlist,\n\tlogout\n};\n"]},"metadata":{},"sourceType":"module"}