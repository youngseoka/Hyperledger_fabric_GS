{"ast":null,"code":"import _classCallCheck from\"/home/fabric/monitor_sk/fabric_explorer_nft/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/fabric/monitor_sk/fabric_explorer_nft/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/fabric/monitor_sk/fabric_explorer_nft/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/fabric/monitor_sk/fabric_explorer_nft/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n *    SPDX-License-Identifier: Apache-2.0\n */import React,{Component}from'react';import{withStyles}from'@material-ui/core/styles';import{PieChart,Pie,Tooltip,Legend}from'recharts';import{sha256}from'js-sha256';import{transactionByOrgType}from'../types';/* istanbul ignore next */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var styles=function styles(theme){var type=theme.palette.type;var dark=type==='dark';return{container:{paddingLeft:'10%','& .recharts-layer':{fill:dark?'rgb(42, 173, 230) !important':'#5bc5c2 !important'},'& .recharts-scatter-line':{stroke:dark?'#ffc145 !important':'#5bc5c2 !important',strokeWidth:'2 !important'},'& .recharts-text':{fill:dark?'#ffffff !important':undefined},'& .recharts-cartesian-axis-line':{stroke:dark?'#ffffff':undefined}},chart:{top:-30}};};function intConversion(str){var value=0;for(var i=0;i<str.length;i++){value=str.charCodeAt(i)+((value<<5)-value);}return value;}function getRGBColor(i){var c=(i&0x00ffffff).toString(16).toUpperCase();return'#'+'00000'.substring(0,6-c.length)+c;}function convertSha256(str){var shaString=sha256(str);return shaString;}export function getOrgColor(org){return getRGBColor(intConversion(convertSha256(org)));}export var OrgPieChart=/*#__PURE__*/function(_Component){_inherits(OrgPieChart,_Component);var _super=_createSuper(OrgPieChart);function OrgPieChart(props){var _this;_classCallCheck(this,OrgPieChart);_this=_super.call(this,props);_this.orgDataSetup=function(orgData){var temp=[];orgData.forEach(function(element){temp.push({value:parseInt(element.count,10),name:element.creator_msp_id,fill:getOrgColor(element.creator_msp_id)});});_this.setState({data:temp});};_this.state={data:[{value:3,name:'OrdererMSP',fill:'#0B091A'},{value:40,name:'Org1MSP',fill:'#6283D0'},{value:23,name:'Org2MSP',fill:'#0D3799'}]};return _this;}_createClass(OrgPieChart,[{key:\"componentDidMount\",value:function componentDidMount(){var transactionByOrg=this.props.transactionByOrg;this.orgDataSetup(transactionByOrg);}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){var transactionByOrg=this.props.transactionByOrg;if(nextProps.transactionByOrg!==transactionByOrg){this.orgDataSetup(nextProps.transactionByOrg);}}},{key:\"render\",value:function render(){var data=this.state.data;var classes=this.props.classes;return/*#__PURE__*/_jsx(\"div\",{className:classes.container,children:/*#__PURE__*/_jsxs(PieChart,{width:485,height:290,className:classes.chart,children:[/*#__PURE__*/_jsx(Legend,{align:\"right\",height:10}),/*#__PURE__*/_jsx(Pie,{data:data,dataKey:\"value\",nameKey:\"name\",cx:\"50%\",cy:\"50%\",outerRadius:90,label:true,fill:\"fill\"}),/*#__PURE__*/_jsx(Tooltip,{})]})});}}]);return OrgPieChart;}(Component);export default withStyles(styles)(OrgPieChart);","map":{"version":3,"sources":["/home/fabric/monitor_sk/fabric_explorer_nft/client/src/components/Charts/OrgPieChart.js"],"names":["React","Component","withStyles","PieChart","Pie","Tooltip","Legend","sha256","transactionByOrgType","styles","theme","type","palette","dark","container","paddingLeft","fill","stroke","strokeWidth","undefined","chart","top","intConversion","str","value","i","length","charCodeAt","getRGBColor","c","toString","toUpperCase","substring","convertSha256","shaString","getOrgColor","org","OrgPieChart","props","orgDataSetup","orgData","temp","forEach","element","push","parseInt","count","name","creator_msp_id","setState","data","state","transactionByOrg","nextProps","classes"],"mappings":"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","sourcesContent":["/**\n *    SPDX-License-Identifier: Apache-2.0\n */\n\nimport React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport { PieChart, Pie, Tooltip, Legend } from 'recharts';\nimport { sha256 } from 'js-sha256';\nimport { transactionByOrgType } from '../types';\n\n/* istanbul ignore next */\nconst styles = theme => {\n\tconst { type } = theme.palette;\n\tconst dark = type === 'dark';\n\treturn {\n\t\tcontainer: {\n\t\t\tpaddingLeft: '10%',\n\t\t\t'& .recharts-layer': {\n\t\t\t\tfill: dark ? 'rgb(42, 173, 230) !important' : '#5bc5c2 !important'\n\t\t\t},\n\t\t\t'& .recharts-scatter-line': {\n\t\t\t\tstroke: dark ? '#ffc145 !important' : '#5bc5c2 !important',\n\t\t\t\tstrokeWidth: '2 !important'\n\t\t\t},\n\t\t\t'& .recharts-text': {\n\t\t\t\tfill: dark ? '#ffffff !important' : undefined\n\t\t\t},\n\t\t\t'& .recharts-cartesian-axis-line': {\n\t\t\t\tstroke: dark ? '#ffffff' : undefined\n\t\t\t}\n\t\t},\n\t\tchart: {\n\t\t\ttop: -30\n\t\t}\n\t};\n};\n\nfunction intConversion(str) {\n\tlet value = 0;\n\tfor (let i = 0; i < str.length; i++) {\n\t\tvalue = str.charCodeAt(i) + ((value << 5) - value);\n\t}\n\treturn value;\n}\n\nfunction getRGBColor(i) {\n\tconst c = (i & 0x00ffffff).toString(16).toUpperCase();\n\treturn '#' + '00000'.substring(0, 6 - c.length) + c;\n}\n\nfunction convertSha256(str) {\n\tconst shaString = sha256(str);\n\treturn shaString;\n}\n\nexport function getOrgColor(org) {\n\treturn getRGBColor(intConversion(convertSha256(org)));\n}\n\nexport class OrgPieChart extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdata: [\n\t\t\t\t{ value: 3, name: 'OrdererMSP', fill: '#0B091A' },\n\t\t\t\t{ value: 40, name: 'Org1MSP', fill: '#6283D0' },\n\t\t\t\t{ value: 23, name: 'Org2MSP', fill: '#0D3799' }\n\t\t\t]\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { transactionByOrg } = this.props;\n\t\tthis.orgDataSetup(transactionByOrg);\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tconst { transactionByOrg } = this.props;\n\t\tif (nextProps.transactionByOrg !== transactionByOrg) {\n\t\t\tthis.orgDataSetup(nextProps.transactionByOrg);\n\t\t}\n\t}\n\n\torgDataSetup = orgData => {\n\t\tconst temp = [];\n\t\torgData.forEach(element => {\n\t\t\ttemp.push({\n\t\t\t\tvalue: parseInt(element.count, 10),\n\t\t\t\tname: element.creator_msp_id,\n\t\t\t\tfill: getOrgColor(element.creator_msp_id)\n\t\t\t});\n\t\t});\n\t\tthis.setState({ data: temp });\n\t};\n\n\trender() {\n\t\tconst { data } = this.state;\n\t\tconst { classes } = this.props;\n\t\treturn (\n\t\t\t<div className={classes.container}>\n\t\t\t\t<PieChart width={485} height={290} className={classes.chart}>\n\t\t\t\t\t<Legend align=\"right\" height={10} />\n\t\t\t\t\t<Pie\n\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\tdataKey=\"value\"\n\t\t\t\t\t\tnameKey=\"name\"\n\t\t\t\t\t\tcx=\"50%\"\n\t\t\t\t\t\tcy=\"50%\"\n\t\t\t\t\t\touterRadius={90}\n\t\t\t\t\t\tlabel\n\t\t\t\t\t\tfill=\"fill\"\n\t\t\t\t\t/>\n\t\t\t\t\t<Tooltip />\n\t\t\t\t</PieChart>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nOrgPieChart.propTypes = {\n\ttransactionByOrg: transactionByOrgType.isRequired\n};\n\nexport default withStyles(styles)(OrgPieChart);\n"]},"metadata":{},"sourceType":"module"}